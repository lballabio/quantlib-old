
class Fixing : public Event {
  private:
    boost::shared_ptr<FloatingRateCoupon> coupon_;
  public:
    ... // constructor
    Date date() const { return coupon_->fixingDate(); }
    boost::shared_ptr<FloatingRateCoupon> coupon() const;
};


class Instrument {
  public:
    ...
    std::list<boost::shared_ptr<Event> > events(const Date&) const;
};



======= TODO ===============

---
GENERAL

- USD yield curve and swaption vols

Cri & Chiara
- max vol at t should not be negative
- abcdBySwapTenor with global displacement
- use OTm options for abcd wbks

- split up marketmodel.xml (Giorgio)

- common base class for capletswaption calibration (io)
  failures
  export sphere to Excel
  index method for accessing only timeseries

- longer time series for hist (K & Marco)

- Reuters feed stay open even when no Reuters is available
- missing fixings for May 25 2007

- QuantLibXL About should use qlQuantLibXlVersion()
- action for main checks
- action for setevaluationdate
- when returning a 1 col/row matrix add another col/row
  with #NA to prevent Excel from duplicating col/row

- every factor in MM might have its own vol model
- profiling MM
- exporto to XL different alpha parametric forms

- qlrequire last caplet == last swaption
- calculate deformations for all methods
- caplet swaption calib whith more than 3 factors
- multiple displacements for swap indexes

- 2Y beta sensitivity
- remove all ActiveWorkbook usage
- cap pricing quality
- remove useless env variables
- be ready to debug production
- switch to boost 1.34
- switch to dynamic xll
- restore floating exception in test-suite
- introduce type QuantLib::Money
- wiki documentation
- automated build system
- adopt boost::date
- use boost property map in OH
- have VBA code in text files

---
NANDO
- Yield Curve Bootstraping needs new style
- all wbks must use qlxlVersion(true, Trigger)
- check testsuite error when QL_INDEXED_COUPON is used
- production: writing privileges (xla and the rest)
- debug hook at xll loading (for debugging start-up actions)
- VS Express
- relinkable handle creation (xla, then xll)
- check Index used in Mx bootstrapping
- test valid object creation with ALL quotes not initialized
- leggere CDS docs
- launcher: set eval date (macro), main check
- EvolutionDescription equality
- ref market data set for test suite
- evaluation date observers
- handle incomplete Reuters menu
- check beta2Y sensitivity
- handle already loaded addin
- special handling of reuters/bloomberg addins
- use Handle in SwaptionVolCubeChecks
- manage auto-open macro problem -> propose:
  Application.EnableEvents=True in qlxl.xla/ThisWorkbook
- TS time interface
- recreating object quotes...
- Higham covariance bug + review rank reduction
- create relinkableHandle, then in ControlPanel only use linkTo
- Instruments subfolder
- vol term structure refactoring
- joint calendar
- mkt convention struct
- YCDemo crash
- alternative calibrations with null rho
- make BlackCalculator observer/observable, make it lazy
- Risk, Wilmott papers (REMIND: VERIFICARE COPIE DISPERSE)
- period algebra
- review dei seguenti workbooks: YC_SwapDemo.xls, IndexMethodsEnumOrObj.xls
- refactor abcd vol file, adding more unary_functions for blackVol and
  covariance
- implement abcdinterpolation

---
K
SA	49%
bug fix	20%
test	14%
CW	18%
- trigger qlVersion() and format properly time stamp in the XXXFeed folders (done)
- add call to volatility method in CapsStripper creation
- metadata creators error messages
- Bug investigation: launcher menu actions			(done)
  - l'errore si presentava con la rev 10882 del foglio intratefeed.xls
    il quale era stato salvato senza ricalcolo
- Rt Update
  -> no evidence of stopping problems on our pcs
  -> prepared wkb to test on traders' pc (next week)
- coveredWarrants.xls
	- check delta price in terms of vega (1d/2d)
- Sensitivity Analysis (K&Cristina):  				(7.5d/5w)
  - General
    run sa on rates, atm vols and vol spreads
    save daily results to check replication
    Eric: flag on deal, tick value, error msg (by eow)
    Eric: upgrade user interface (by end of next week)
    parallel shift added by default
    centered differences, then gamma
    theta SA
    xml output
    handle sensitivity to index fixings
    list all quotes that we could analize
    discriminate between invalid quote -> #NA()
       and error obtained after having tweaked a quote -> #NUM
  - Irs
    - create book (test_fe_2) of irs seasoned deals in Mx	(done)
    - check null vega of swap ptf (ATM+smile)			(done)
    - test delta on irs spot single deals = Mx 			(done)
    - test delta on irs seasoned book = Mx         		(done)
    - test delta on irs manual = sa code 			(done)
    - generated .xls report 					(done)
    - test fixing effect on pricing				(done)
      a. present on spot starting irs
      b. present on seasoned irs (via swap rate helpers)  
    - test fixing effect on sa					()
      a. spot starting irs
      b. seasoned irs 						()  
  - Swaption
    - create book (test_fe_1) of swaptions in Mx & QLXL		(done)
    - create book of not ATM (seasoned) swaption, X=3.5%	(done)
    - test on swaptions book (atm+smile)
  - Cms
    - test on cms books
- foglio di Clerici per contribuire le cap forw/forw vol su Mx 		(1.5d/5d)
	confronto forw/forw vols foglio clerici vs nostro cap stripper 	(0.5d/1.5d)
	sostituzione di tutte le funzioni vba con ql()
	scarico del campo hist_close da Reuters -> usato solo per
	                                           controllo/supporto
	opzione uso AllQuotes vs OTM Only
	parallel shift from straddle prices +
	linear interp sulle expiry times calcolate sull'eval date
		-> aggiustamento dei param di calibr
	opzione per interp vol vs interp params
	pricing degli straddle su futures options
	modello di correlazione per costruire le 6m vol dalle 3m vol
	cubic spline interp per ogni strike sulla matrice estesa delle 6M
	abcd adjustment della matrice delle forw/forw vol
	contribuzione su Mx delle 1m, 3m, 6m, 1y
- 3M cap stripper: 	(0/3w)
	review triggers in wkbs (0.5D/0.5D done)
	overview: focus on smile sections
	sensitivity to market data
	gestione manuale ordinaria (con Clerici)
	prendere possesso foglio Clerici
	reintroduzione in 6M cap stripper
	test wbk: abcd fit
  	atm backbone: CapStripper3MTestSmoothness.xls
- 6M cap stripper: (1.5D/1w)
	atm backbone: CapStripper6MTestSmoothness.xls (0.5D/0.5D done)
	testa la smoothness della dorsale ATM con l'interpolazione lineare
	(0.5D/0.5D done)
	CapStripper6MTestRepricing.xls: aggiungi (0.5D/0.5D done)
	decidere se usare le interpolated vols da usare nel cap stripper
- bug in function SetRealTime() -> Rt seems not to switch settings
- migliora la macro "Copy Values" in SingleMeanReversion.xls
- rimuovere Singleton and set YTS to Euribor
- manual feeds: CalibrationParametersFeed partially updated to live/overwrite
  logic
** Calibrations: UpperBoundary calculation -> root not bracketed
** control panel . xls crash when switch to MxCurve

---
CRISTINA
- cap/floor flow analysis
- arrange session on digitals
- clean up Clerici's abcd problems (0.25D/0.25D - Waiting for users feedback)
- IFR fixings, check deals
- verify Murex daycount definition
- fix number of relevant digits in all (forecasted) index fixings
- sensitivity analysis (3.5D/1M)
- daily trunk check and CMS calibration
- testing that the manual procedure to set back/forward the evaluation
  date returns the same results of the automatic procedure (0D/1D)
- change class CappedFlooredIborCoupon in order to add the
  possibility of adding/subracting call and put   (1D/2D)
- Cap Cms Book:
  - pricing of Cms Cap without decomposition in Excel (To be discussed)
  - new management of additional cashflows in Cap Cms book (0D/1D - STAND-BY)
- install VS in new pc (0D/1D)
- market models: abcd for displaced vols (Chiara, Cristina, K)

---
CHIARA
- erratic Grisafi's bond monitor behaviour
- Digital Bond contructor
  - arrange session on digitals with Cristina
- check dual user Launcher installation on Grisafi's workstation
- fixed problem with missing ISDAFIX indexes for 28th may 2007 (0.5d|0.5d|)
- debug cmsratebond constructor for cms bond paying once in arrears (e.g.
  IT0003650998.pdf) (0d|1d)
  -prospectus added in Drafts
- review and correct trader's bond monitor (0d|1d)
- Z-spread function, for zero coupon bond valuation (3.0d|10dd|WIP)
  - lehman's documentation
  - created new workbook to replicate market practice (YAF, YAS on BBG) use of
    z-spread
  - created qlBondCleanPriceFromZSpread()
  - double check against YAF, YAS on BBG
  - add test in test suite
- cds options (with Giorgio) (1.5d-30dd|WIP)
  - analysis of the trader's workbook
  - verified correct installation of Launcher, access given to the trader to
    the 3 different environments on the network
  - sent request to desktop service so to add the user to CABOTOXL
- markedata\BloombergFeed (Maurizio Pietrini)
  - waiting for BBG worksheets from Maurizio (Maurizio is starting on 5th or 6th)
- zspread/yield inversion
- zerospreadedtermstructure: daycounter bug
- bonds' workbooks integration with K+/Gatemate
- Multicallable bond constructor
- review bond equivalent fo Reverse FRN
- implement alternative version of bond instrument which should accept a leg
  object
- fare tutti i metodi dei bond restituiscano un InterestRate
- i ThMethod perche' non accettano anche loro una Date settlementDate = Date()?
- market models: abcd for displaced vols (Chiara, Cristina, K)

---
FRANCOIS
- null strike -> atm strike (1W|WIP)
- arrange sessions on Rapisarda approach(TBD)
D historic corr matrix (2D|2D)
D control panel . xls crash when switch to MxCurve
D Citrix access: $+,BGM
FAILURE Citrix access: INFL
- XML/ serialization presentation
D OH Wizard review: vector input, change in XML file structure to implement
  default values (0.5D/0.5D)
D MM: different correlation structures (Rapisarda, Schoenmakers and
  Coffey)(5.5D/2D-5D) (To be reviewed)
- conundrum pricer optimization (1D/2D)
- notification chains pb (1D/3D)
  tTermStructure lazyness in notification
- smile sections:
	D remove calibration from constructor(1H)
	- use Levenberg optimizator
	- move vol quotes from constructor(to be precised)
- add SABR interpolation to the capstripper(to be precised)
- refactor the method class (move Endcriteria as argument of the minimize)
  (done)
- OH Wizard performance issue when the control panel is left opened(to be
  precised)
- test abcd calibration (to be precised)
- TO BE REVIEWED MultiStepSwaption
- check sabr fit stability/accuracy for smilesections (.5D)
- review workbooks: SmileSectionCaps.xls, SimpleQuote.xls, DerivedQuotes.xls,
  CapStripperTest3M.xls. (to be precised)

---
GIORGIO (last update 6/6/2007)
- prepare smile section refactoring proposal
- fixing days vector
- range accrual session
- CDS options (with Chiara)
- illustrate projectedCostFunction to Ferdinando
- install VS in new pc (0d/1d)
- WIP ratchet Instrument C++ (shared with Marco) (3d/7d)
- WIP range accrual coupon (con relativi test) (18d/30d)
  - WIP create a workbook for range accrual under
    Workbooks\InterestRateDerivatives designing the workbook as done for CMS.xls
- Visual Studio Express installation

---
MARCO (last update 7/6/2007)
- verify set up svn folders (DONE)
- Citrix showdown: (0.5d/1d/WIP)
  - verifica licenze accesso: individuato referente, -> Katiuscia (DONE)
  - verifica accesso a $+ (DONE)
  - utenze BGM x tutti (DONE)
  - autorizzazione accesso Francois a Iflazione (Waiting Ametrano)
  - assistenza verifica accesso Quants (waiting Ametrano)
- check optimizers:
  - fix steepest descent (with Francois) (1d/2d/WIP)
  - add more tests (multidimensional) in test suite (to be planned)
  - add Broyden-Fletcher-Goldfarb-Shanno algorithm (to be planned)
  - check export to excel and testing wkb (to be planned)
- historical correlation (shared with francois; TO BE REVIEWED)
- pricing plain vanilla legs in BGM book (with Marco/Giorgio/Cristina)
  (0.0/2d/WAITING FOR DIGITAL OPTIONS)
- Risk, Wilmott papers (0.0/1d/WAITING for Ferdinando)
- Inflation project:
  - Attività UAT (3w/2w/DONE)
  - Caboto/DOF platform release EOD (DONE)
  - Caboto/DOF platform release intraday (15/6/2007 ?)
  - Planning next steps (15/6/2007 ?)
  - Montecarlo implementation for Caboto Model (WIP)
  - 3 factor model and Hybrids (?)
- Applix: Rolling bund Futures on 8/6/2007 (DONE)

---
Eric
- why xxl loading does not receive the same graful failure treatment
- If omitted/blank/NA, default = FALSE
  If omitted/blank/NA/error, default = FALSE
- open log file from menu
- log defaults
- automatic cell menu updates
- erratic error message behaviour
  why the error message doesn't disappear as soon as the cell is not in error
  anymore
- SA, serialization
- 2 DOF projects
- JRisk
- minimize Launcher data download
- coerce Frequency->Period, Period->Date->double/int
- coerce from IMMcode to date
- imm functions (dates.xml) problems
- remove quantlibxl-bin.nsi
- merge quantlibxl.nsi and quantlib-network.nsi
- in the nsi generalize the location of the xml files
- oh.chm
- review native ohSplit on vector input to coerce from string to vector
- ohConcatenate, ohRange1D, ohRange2D
- command (remove function SetEvaluationDate, etc?)
- discount factors output is not col/row enabled
- esporre ad excel i metodi commentati in payoff.xml
- visitor pattern per 3rd parameter dei payoff
- Handle coercion to SwaptionVolDiscrete
- freeze, unfreeze objects

QuantLib
- pricing enine refactoring
- Cashflows::iborSpread function
- clean up index fixing calendar
- cash rebate è multistep?
- aggiungere Forward all'enumeration Call/Put
- fix convertible faceamount bug
- deprecate swaptionvol time interface
- corregere OneAssetOption impliedVol
- SWAP implement fair rate for floating/fixed rate vector
- use boost random number generators
- Volatility assume a daycounter in the same way as rate (see InterestRate)
- ForwardSpreadedCurve con spread term structure
- throw first what in notifyobservers
- Instrument<Args>
- Inherit Exercise from Event?
- use strategy pattern for simulation termination criteria
- se possibile rispettare la misura ProductSuggested nel Composite

QuantLib RATEHELPERS
- earliest days dovrebbe tener conto dei fixing days

QuantLib PIECEWISEYIELDCURVE
- FRARateHelper deve avere dentro in FRA Instrument
- turn of year
- extended grid with all relevant dates
- revise bondhelpers
- bootstrap ForwardSpreadedYieldCurve

LUIGI
- debug vari crash in test suite per floating point exception
- risolvere Halley improvements
- InterpolatedYieldTermStructure<Discount,LogLinear>
- InterpolatedYieldTermStructure<Discount,LogLinear> constructor using an input
  discount grid
- InterpolatedYieldTermStructure<Discount,LogLinear>::gridDates()
- generic ForwardSpreadedYieldCurve (spread term structure)
- bootstrap ForwardSpreadedYieldCurve using its own ratehelpers and a base curve

QUANTLIBADDIN
- RSG factory
- export ImpliedCurve
- export PathGeneration
- export discount, loglinear selection
- use QL folder structure
- port old QuantLibXL functionalities

QUANTLIBXL WORKBOOKS
- nel ControlPanel dare evidenza dei feed: CMS
- Property example?
- SWAPTION spreadsheet with multiple prices
- all spreadsheets with grid prices
- merge old QuantLibXL functions
- more calendar drop down cell menu
- YYYYDDMM_HHMM timestamp in log file name doesn't work the second time
- file name cannot be changed without time

QUANTLIBXL VBA
